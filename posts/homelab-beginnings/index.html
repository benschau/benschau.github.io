<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Homelab Beginnings - home</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Homelab Beginnings" />
<meta property="og:description" content="Recently, after having graduated from college, I figured I wanted to spend some of the cash I saved up during college to finally kickstart a real homelab. A couple goals to keep in mind:
 Wanted to be able to run more intensive programs, distributed stuff (MPI, RPC) on &lsquo;separate&rsquo; machines.  Virtual clusters for the distributed stuff, and compiling bigger projects would ease my pain for things like contributing to big open source projects (Linux kernel, Firefox, which I wanted to do but haven&rsquo;t had the heart to try and get into)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://benschau.com/posts/homelab-beginnings/" />
<meta property="article:published_time" content="2020-06-16T16:33:32-04:00" />
<meta property="article:modified_time" content="2020-06-16T16:33:32-04:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Homelab Beginnings"/>
<meta name="twitter:description" content="Recently, after having graduated from college, I figured I wanted to spend some of the cash I saved up during college to finally kickstart a real homelab. A couple goals to keep in mind:
 Wanted to be able to run more intensive programs, distributed stuff (MPI, RPC) on &lsquo;separate&rsquo; machines.  Virtual clusters for the distributed stuff, and compiling bigger projects would ease my pain for things like contributing to big open source projects (Linux kernel, Firefox, which I wanted to do but haven&rsquo;t had the heart to try and get into)."/>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
	<link rel="stylesheet" type="text/css" media="screen" href="https://benschau.com/css/main.css" /><link rel="stylesheet" type="text/css" href="https://benschau.com/css/dark.css" media="(prefers-color-scheme: dark)" />
</head><body>
        <div class="content"><header>
	<div class="main">
		<a href="https://benschau.com/">home</a>
	</div>
	<nav>
		
		<a href="https://benschau.com/">home</a>
		
		<a href="https://benschau.com/posts">posts</a>
		
		<a href="https://benschau.com/about">about</a>
		
		<a href="https://benschau.com/tags">tags</a>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Homelab Beginnings</h1>
			<div class="meta">Posted on Jun 16, 2020</div>
		</div>
		

		<section class="body">
			<p>Recently, after having graduated from college, I figured I wanted to spend some
of the cash I saved up during college to finally kickstart a real homelab. A
couple goals to keep in mind:</p>
<ol>
<li>Wanted to be able to run more intensive programs, distributed stuff (MPI, RPC)
on &lsquo;separate&rsquo; machines.
<ul>
<li>Virtual clusters for the distributed stuff, and compiling bigger projects
would ease my pain for things like contributing to big open source projects
(Linux kernel, Firefox, which I wanted to do but haven&rsquo;t had the heart to
try and get into). I used to try to do these things on a laptop, and the
compilation time was horrendous.</li>
</ul>
</li>
<li>A media server with a passthrough HDD; some caveats.
<ul>
<li>I don&rsquo;t have the cash to buy a Synology box, and I figured a desktop
server box would be fine in this case. No RAID or anything at the moment.</li>
</ul>
</li>
</ol>
<p>I didn&rsquo;t (still kind of don&rsquo;t, but tempted) buy a rack-mounted server. I&rsquo;m wary
of buying stuff off ebay at the moment, and I thought it&rsquo;d be more fun (and
economical) to just build my own machine. I would build one tower and use it purely
as a hypervisor, then expand from there.</p>
<p>So, for my first build, I used:</p>
<ul>
<li>AMD Ryzen 9 3900x, 3.8Ghz</li>
<li>Noctua NH-D15 82.5 CFM CPU Cooler</li>
<li>Asus ROG Crosshair VIII Hero ATX AM4 X570
<ul>
<li>The more expensive AM4 mobos; mostly because I didn&rsquo;t want to wait for B550 and
I wanted to take advantage of the new PCIE4.0 SSD slots.</li>
</ul>
</li>
<li>G.Skill Trident Z Neo 64 GB (2x32), 3200Mhz, CL16</li>
<li>Sabrent Rocket 4.0 M.2, 1TB</li>
<li>WD RED 4TB 2x</li>
<li>GTX 1030</li>
<li>Fractal Design Meshify C ATX
<ul>
<li>Also 2x extra 140mm case fans (be quiet! Pure Wings 2). I used a PWM fan splitter
since the molex connectors that come with the fans are a bit too short, and it saves
me one extra slot if I end up needing more fans.</li>
</ul>
</li>
<li>SeaSonic FOCUS Gold 650W, 80+ Gold</li>
</ul>
<p>I also went with air-cooling in the system out of paranoia; I didn&rsquo;t want to have to deal
with the risks of a liquid cooling system (custom/otherwise).
The idea of having any water in the system makes me a little queasy, and hopefully nothing I do
will be intensive enough to warrant it.</p>
<p>I grabbed some decent pieces of RAM, as low clock latency and as high frequency as I could find
while still being within budget. I could have gotten it cheaper with better performance
at 4x16, but I wanted to keep another 2 slots to grab another set to expand to 128GB when it
becomes necessary. VMs tend to eat through your memory the more that run, whether they&rsquo;re
actually doing anything or not (you will usually run out of memory before all your cores
are actively doing something), since their state needs to be maintained somewhere.</p>
<p>Some regrets and remedies about this build:</p>
<ol>
<li>Storage; I didn&rsquo;t have the drive bays (or drives, or cash) to spend on a RAID controller
and extra disks, plus another case that has a) hot-swappable drives or b) more than one drive
bay, which the Meshify C doesn&rsquo;t have at all.
<ul>
<li><strong>Remedy</strong>: Buy another case, but with a ton of drives in it, and a RAID controller.
I want to expand into a rack server eventually, so I may not buy a new case and just
grab a used R710 with 3.5 drive bays. I believe there are models with 6x 3.5 drive bays,
so I could RAID10 some of the drives and maintain the rest for the host OS and
leave the RAID controller to passthrough to a VM. It doesn&rsquo;t sound like a great
idea to keep the host OS with the RAID drives. <strong>Note:</strong> don&rsquo;t know if the R710
has internal drives or not.</li>
</ul>
</li>
<li>My VMs share storage on a logical volume with the NVME SSD and the remaining 4TB HDD. Would
want to move my media VM and RAID&rsquo;d storage onto a separate machine, either as another
hypervisor node in my homelab to host as VMs w/ passthrough RAID. Basically, I might want
to migrate my VM onto a machine that it can have to itself, though I feel like I would
be wasting money with how many end users I am expecting.
<ul>
<li><strong>Remedy</strong>: See 1); solves this problem, but I still don&rsquo;t know how I want to host
my VM storage (on a NAS, or locally.) You know what they say- if you don&rsquo;t know, try it.</li>
</ul>
</li>
</ol>
<p>I want to expand my homelab anyway, though I haven&rsquo;t exhausted the resources of my current build. Since I want to eventually get to rack servers, I either want to grab an R710 to use
as an extra virtualization node to host my NAS w/ OpenMediaVault &amp; Jellyfin (but doing it
with RAID instead of passing just the 1 4TB HDD), or replace my current Meshify C case with
a Define R5 (has like 8 drive bays) or another case that is rackable (debating this, since it
would have to be at least 4u to retain my ATX stuff).</p>

		</section>

		<div class="post-tags">
			
			
			
		</div>
	</article>
</main>
<footer>
<hr><a class="soc" href="https://github.com/benschau" title="GitHub"><i data-feather="github"></i></a>|⚡️
	2020  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>


<script>
      feather.replace()
</script>

</div>
    </body>
</html>
